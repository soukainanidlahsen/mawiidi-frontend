<div class="booking-container">
    <h2>Book an Appointment</h2>

    <!-- Step 1: Search & Select Doctor -->
    <div *ngIf="step === 1">
        <div class="search-bar card">
            <div class="form-group">
                <label>City</label>
                <select [(ngModel)]="searchCity" (change)="filterDoctors()" class="form-control">
                    <option value="">All Cities</option>
                    <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
                </select>
            </div>
            <div class="form-group">
                <label>Specialty</label>
                <select [(ngModel)]="searchSpecialty" (change)="filterDoctors()" class="form-control">
                    <option value="">All Specialties</option>
                    <option *ngFor="let spec of specialties" [value]="spec">{{ spec }}</option>
                </select>
            </div>
        </div>

        <div class="doctors-list">
            <div class="doctor-card card" *ngFor="let doctor of filteredDoctors">
                <div class="doc-info">
                    <h3>Dr. {{ doctor.firstName }} {{ doctor.lastName }}</h3>
                    <p class="specialty">{{ doctor.specialty }}</p>
                    <p class="location">üìç {{ doctor.city }} - {{ doctor.address }}</p>
                </div>
                <button class="btn btn-primary" (click)="selectDoctor(doctor)">Book Now</button>
            </div>
        </div>
    </div>

    <!-- Step 2: Select Slot -->
    <div *ngIf="step === 2 && selectedDoctor">
        <button class="btn btn-outline mb-3" (click)="back()">‚Üê Back</button>
        <div class="card">
            <h3>Book with Dr. {{ selectedDoctor.firstName }} {{ selectedDoctor.lastName }}</h3>

            <div class="form-group">
                <label>Select Date</label>
                <input type="date" [(ngModel)]="selectedDate" [min]="minDate" [max]="maxDate" class="form-control">
            </div>

            <div class="slots-grid" *ngIf="selectedDate">
                <button *ngFor="let slot of availableSlots" class="slot-btn" [class.selected]="selectedTime === slot"
                    (click)="selectedTime = slot">
                    {{ slot }}
                </button>
            </div>

            <button class="btn btn-primary mt-3" [disabled]="!selectedDate || !selectedTime" (click)="confirmBooking()">
                Confirm Booking
            </button>
        </div>
    </div>
</div>