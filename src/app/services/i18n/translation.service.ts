import { Injectable, signal, WritableSignal } from '@angular/core';

export type Lang = 'en' | 'fr' | 'ar';

@Injectable({
  providedIn: 'root'
})
export class TranslationService {
  private currentLang: WritableSignal<Lang> = signal('fr'); // Default to French

  private translations: Record<Lang, Record<string, string>> = {
    en: {
      'login.welcome': 'Welcome Back',
      'login.subtitle': 'Sign in to access your workspace',
      'login.email': 'Email Address',
      'login.password': 'Password',
      'login.signin': 'Sign In',
      'login.register': 'Register here',
      'login.no_account': "Don't have an account?",

      'register.title': 'Create Account',
      'register.subtitle': 'Join Mawiidi today',
      'register.firstName': 'First Name',
      'register.lastName': 'Last Name',
      'register.email': 'Email Address',
      'register.password': 'Password',
      'register.role': 'I am a...',
      'register.patient': 'Patient',
      'register.doctor': 'Doctor',
      'register.submit': 'Create Account',
      'register.loading': 'Creating...',
      'register.hasAccount': 'Already have an account?',
      'register.signin': 'Sign in',

      'common.back': 'Back',

      'dashboard.title': 'Patient Portal',
      'dashboard.welcome': 'Welcome,',
      'dashboard.subtitle': "Here's your health overview",
      'dashboard.book': 'Book Appointment',
      'dashboard.appointments': 'My Appointments',
      'dashboard.records': 'Medical Records',
      'dashboard.profile': 'Profile',
      'dashboard.notifications': 'Notifications',
      'dashboard.messages': 'Messages',
      'dashboard.complaints': 'Complaints',
      'dashboard.logout': 'Logout',
      'dashboard.upcoming': 'Upcoming Appointments',
      'dashboard.quickActions': 'Quick Actions',
      'dashboard.viewAll': 'View All',
      'dashboard.bookNow': 'Book Now',
      'dashboard.noAppointments': 'No upcoming appointments',
      'dashboard.loading': 'Loading...',
      'dashboard.details': 'Details',
      'dashboard.sendMessage': 'Send Message',
      'dashboard.viewRecords': 'View Records',
      'dashboard.fileComplaint': 'File Complaint',
      'dashboard.newMessages': 'New Messages',
      'dashboard.medicalRecords': 'Medical Records',
      'dashboard.upcomingAppointments': 'Upcoming Appointments',

      // Profile Page
      'profile.title': 'My Profile',
      'profile.patient': 'Patient',
      'profile.firstName': 'First Name',
      'profile.lastName': 'Last Name',
      'profile.email': 'Email',
      'profile.phone': 'Phone',
      'profile.address': 'Address',
      'profile.city': 'City',
      'profile.editProfile': 'Edit Profile',
      'profile.saveChanges': 'Save Changes',

      // Booking Page
      'booking.title': 'Book Appointment',
      'booking.searchDoctor': 'Find a Doctor',
      'booking.city': 'City',
      'booking.specialty': 'Specialty',
      'booking.allCities': 'All Cities',
      'booking.allSpecialties': 'All Specialties',
      'booking.search': 'Search',
      'booking.availableDoctors': 'Available Doctors',
      'booking.noDoctors': 'No doctors found',
      'booking.selectSlot': 'Select Date & Time',
      'booking.selectDate': 'Select Date',
      'booking.selectTime': 'Select Time',
      'booking.confirm': 'Confirm Booking',
      'booking.back': 'Back',
      'booking.bookWith': 'Book with',

      // Appointments Page
      'appointments.title': 'My Appointments',
      'appointments.upcoming': 'Upcoming',
      'appointments.past': 'Past',
      'appointments.noAppointments': 'No appointments found',
      'appointments.doctor': 'Doctor',
      'appointments.date': 'Date',
      'appointments.time': 'Time',
      'appointments.status': 'Status',
      'appointments.cancel': 'Cancel',
      'appointments.reschedule': 'Reschedule',
      'appointments.confirmed': 'Confirmed',
      'appointments.pending': 'Pending',
      'appointments.cancelled': 'Cancelled',

      // Messaging Page
      'messaging.title': 'Messages',
      'messaging.conversations': 'Conversations',
      'messaging.noMessages': 'No messages yet',
      'messaging.typeMessage': 'Type a message...',
      'messaging.send': 'Send',
      'messaging.backToList': 'Back to conversations',

      // Medical Records Page
      'records.title': 'Medical Records',
      'records.noRecords': 'No records found',
      'records.doctor': 'Doctor',
      'records.specialty': 'Specialty',
      'records.lastVisit': 'Last Visit',
      'records.diagnosis': 'Diagnosis',
      'records.prescription': 'Prescription',
      'records.download': 'Download',

      // Notifications Page
      'notifications.title': 'Notifications',
      'notifications.noNotifications': 'No notifications',
      'notifications.markRead': 'Mark as Read',
      'notifications.delete': 'Delete',

      // Complaints Page
      'complaints.title': 'Complaints',
      'complaints.newComplaint': 'New Complaint',
      'complaints.subject': 'Subject',
      'complaints.description': 'Description',
      'complaints.submit': 'Submit',
      'complaints.myComplaints': 'My Complaints',
      'complaints.noComplaints': 'No complaints',
      'complaints.pending': 'Pending',
      'complaints.resolved': 'Resolved',
      'complaints.response': 'Response',

      'common.save': 'Save Changes',
      'common.cancel': 'Cancel',
      'common.edit': 'Edit',
      'common.delete': 'Delete',

      // Landing Page
      'landing.slogan': 'Appointments in public hospitals of Morocco',
      'landing.nav.home': 'Home',
      'landing.nav.about': 'About',
      'landing.nav.services': 'Services',
      'landing.nav.doctors': 'Doctors',
      'landing.nav.contact': 'Contact',
      'landing.login': 'Login',

      'landing.hero.tag': 'WELCOME TO MAWIIDI 2',
      'landing.hero.title': 'Book your appointments in public hospitals, easily',
      'landing.hero.subtitle': 'A national platform to facilitate access to care. Patients, doctors, administration: everything is connected.',
      'landing.hero.book': 'Book Appointment',
      'landing.hero.register': 'Register',
      'landing.hero.patient': 'I am a Patient',
      'landing.hero.doctor': 'I am a Doctor',

      'landing.services.title': 'Our Services',
      'landing.services.subtitle': 'Discover specialties available in public hospitals',
      'landing.services.cardio': 'Cardiology',
      'landing.services.cardio.desc': 'Comprehensive care for your heart.',
      'landing.services.neuro': 'Neurology',
      'landing.services.neuro.desc': 'Diagnosis and treatment of nervous disorders.',
      'landing.services.ortho': 'Orthopedics',
      'landing.services.ortho.desc': 'Care for bones and joints.',
      'landing.services.pedia': 'Pediatrics',
      'landing.services.pedia.desc': 'Medical care for children.',
      'landing.services.all': 'View all services',

      'landing.departments.title': 'Our Departments',
      'landing.departments.subtitle': 'Discover the specialties available in public hospitals',
      'landing.departments.view_all': 'View All Departments',
      'landing.dept.cardiology': 'Cardiology',
      'landing.dept.cardiology_desc': 'Comprehensive heart care and treatment.',
      'landing.dept.neurology': 'Neurology',
      'landing.dept.neurology_desc': 'Expert brain and nervous system care.',
      'landing.dept.pediatrics': 'Pediatrics',
      'landing.dept.pediatrics_desc': 'Specialized care for children.',
      'landing.dept.dental': 'Dental Care',
      'landing.dept.dental_desc': 'Complete dental health services.',

      'landing.about.title': 'About Mawiidi 2',
      'landing.about.desc': 'Mawiidi 2 is an initiative of the Ministry of Health to digitize and simplify appointment booking in public hospitals.',
      'landing.about.f1': '24/7 Appointment Booking',
      'landing.about.f2': 'Access to your medical record',
      'landing.about.f3': 'SMS Notifications and Reminders',
      'landing.about.f4': 'Simplified management for doctors',
      'landing.about.more': 'Learn More',

      'landing.footer.desc': 'National appointment platform.',
      'landing.footer.links': 'Quick Links',
      'landing.footer.contact': 'Contact',
      'landing.footer.newsletter': 'Newsletter',
      'landing.footer.subscribe': 'Subscribe',
      'landing.footer.rights': 'All rights reserved.',

      // Portal Selector
      'portal.title': 'Choose Your Workspace',
      'portal.subtitle': 'Select the portal that corresponds to your role',
      'portal.user.title': 'Patient',
      'portal.user.desc': 'Book appointments, access your medical records, and communicate with doctors.',
      'portal.doctor.title': 'Doctor',
      'portal.doctor.desc': 'Manage your schedule, patient records, and consultations.',
      'portal.admin.title': 'Administrator',
      'portal.admin.desc': 'Manage users, validate schedules, and monitor the platform.',

      // Doctor Landing Page
      'doctor.slogan': 'Medical Professional Portal',
      'doctor.nav.features': 'Features',
      'doctor.nav.benefits': 'Benefits',
      'doctor.hero.tag': 'DOCTOR PORTAL',
      'doctor.hero.title': 'Manage your practice with ease',
      'doctor.hero.subtitle': 'A complete platform to manage your schedule, patient records, and consultations. Everything you need in one place.',
      'doctor.hero.login': 'Access My Space',
      'doctor.hero.register': 'Join Us',
      'doctor.features.title': 'Powerful Features',
      'doctor.features.subtitle': 'Tools designed to simplify your daily practice',
      'doctor.feature.schedule': 'Schedule Management',
      'doctor.feature.schedule_desc': 'View and manage your appointments. Define your available slots weekly.',
      'doctor.feature.records': 'Patient Records',
      'doctor.feature.records_desc': 'Access complete patient history, allergies, treatments, and medical documents.',
      'doctor.feature.prescriptions': 'Digital Prescriptions',
      'doctor.feature.prescriptions_desc': 'Generate digitally signed PDF prescriptions and consultation reports.',
      'doctor.feature.messaging': 'Secure Messaging',
      'doctor.feature.messaging_desc': 'Communicate securely with your patients. Real-time notifications.',
      'doctor.benefits.title': 'Why Join Mawiidi 2?',
      'doctor.benefits.desc': 'Join the digital revolution in healthcare. Simplify your practice and focus on what matters most: your patients.',
      'doctor.benefit.1': 'Reduce administrative workload',
      'doctor.benefit.2': 'Access records from anywhere',
      'doctor.benefit.3': 'Submit weekly schedule changes for admin approval',
      'doctor.benefit.4': 'Receive notifications for appointments and messages',
      'doctor.benefits.cta': 'Register Now',
      'doctor.footer.desc': 'The professional platform for doctors in public hospitals.',
      'doctor.footer.support': 'Technical Support',
      'doctor.footer.support_desc': 'Dedicated support team available 24/7.',

      // Admin Landing Page
      'admin.slogan': 'Administration Portal',
      'admin.nav.features': 'Features',
      'admin.nav.modules': 'Modules',
      'admin.hero.tag': 'Admin Portal',
      'admin.hero.title': 'Complete Hospital Management',
      'admin.hero.subtitle': 'Full control over structures, appointments, planning, and compliance. Manage your healthcare network efficiently.',
      'admin.hero.login': 'Access Admin Panel',
      'admin.features.title': 'Powerful Management Tools',
      'admin.features.subtitle': 'Everything you need to manage hospitals, doctors, and patients',
      'admin.feature.structures': 'Structures Management',
      'admin.feature.structures_desc': 'Create and manage establishments, services, and doctors.',
      'admin.feature.appointments': 'Appointment Supervision',
      'admin.feature.appointments_desc': 'Global view, occupancy rates, no-show statistics.',
      'admin.feature.planning': 'Planning Validation',
      'admin.feature.planning_desc': 'Review and approve doctor schedule changes.',
      'admin.feature.complaints': 'Complaints Management',
      'admin.feature.complaints_desc': 'Handle patient complaints and resolutions.',
      'admin.feature.settings': 'System Settings',
      'admin.feature.settings_desc': 'Configure appointment durations, reminders, and roles.',
      'admin.feature.security': 'Security & Compliance',
      'admin.feature.security_desc': 'Access logs, GDPR compliance, Law 09-08.',
      'admin.cta.title': 'Ready to manage your hospital network?',
      'admin.cta.desc': 'Access all administration tools in one place.',
      'admin.footer.desc': 'The administration platform for public hospitals.',
      'admin.footer.support': 'Technical Support',
      'admin.footer.support_desc': 'Dedicated support team available 24/7.'
    },
    fr: {
      'login.welcome': 'Bon retour',
      'login.subtitle': 'Connectez-vous pour accéder à votre espace',
      'login.email': 'Adresse Email',
      'login.password': 'Mot de passe',
      'login.signin': 'Se connecter',
      'login.register': 'Inscrivez-vous ici',
      'login.no_account': "Vous n'avez pas de compte ?",

      'register.title': 'Créer un Compte',
      'register.subtitle': 'Rejoignez Mawiidi aujourd\'hui',
      'register.firstName': 'Prénom',
      'register.lastName': 'Nom',
      'register.email': 'Adresse Email',
      'register.password': 'Mot de passe',
      'register.role': 'Je suis...',
      'register.patient': 'Patient',
      'register.doctor': 'Médecin',
      'register.submit': 'Créer le Compte',
      'register.loading': 'Création...',
      'register.hasAccount': 'Vous avez déjà un compte ?',
      'register.signin': 'Se connecter',

      'common.back': 'Retour',

      'dashboard.title': 'Portail Patient',
      'dashboard.welcome': 'Bienvenue,',
      'dashboard.subtitle': 'Voici votre aperçu santé',
      'dashboard.book': 'Prendre Rendez-vous',
      'dashboard.appointments': 'Mes Rendez-vous',
      'dashboard.records': 'Dossiers Médicaux',
      'dashboard.profile': 'Profil',
      'dashboard.notifications': 'Notifications',
      'dashboard.messages': 'Messages',
      'dashboard.complaints': 'Réclamations',
      'dashboard.logout': 'Déconnexion',
      'dashboard.upcoming': 'Rendez-vous à venir',
      'dashboard.quickActions': 'Actions Rapides',
      'dashboard.viewAll': 'Voir Tout',
      'dashboard.bookNow': 'Réserver',
      'dashboard.noAppointments': 'Aucun rendez-vous à venir',
      'dashboard.loading': 'Chargement...',
      'dashboard.details': 'Détails',
      'dashboard.sendMessage': 'Envoyer Message',
      'dashboard.viewRecords': 'Voir Dossiers',
      'dashboard.fileComplaint': 'Déposer Réclamation',
      'dashboard.newMessages': 'Nouveaux Messages',
      'dashboard.medicalRecords': 'Dossiers Médicaux',
      'dashboard.upcomingAppointments': 'Rendez-vous à Venir',

      // Profile Page
      'profile.title': 'Mon Profil',
      'profile.patient': 'Patient',
      'profile.firstName': 'Prénom',
      'profile.lastName': 'Nom',
      'profile.email': 'Email',
      'profile.phone': 'Téléphone',
      'profile.address': 'Adresse',
      'profile.city': 'Ville',
      'profile.editProfile': 'Modifier le Profil',
      'profile.saveChanges': 'Enregistrer',

      // Booking Page
      'booking.title': 'Réserver un Rendez-vous',
      'booking.searchDoctor': 'Trouver un Médecin',
      'booking.city': 'Ville',
      'booking.specialty': 'Spécialité',
      'booking.allCities': 'Toutes les Villes',
      'booking.allSpecialties': 'Toutes les Spécialités',
      'booking.search': 'Rechercher',
      'booking.availableDoctors': 'Médecins Disponibles',
      'booking.noDoctors': 'Aucun médecin trouvé',
      'booking.selectSlot': 'Choisir Date & Heure',
      'booking.selectDate': 'Choisir la Date',
      'booking.selectTime': 'Choisir l\'Heure',
      'booking.confirm': 'Confirmer la Réservation',
      'booking.back': 'Retour',
      'booking.bookWith': 'Réserver avec',

      // Appointments Page
      'appointments.title': 'Mes Rendez-vous',
      'appointments.upcoming': 'À venir',
      'appointments.past': 'Passés',
      'appointments.noAppointments': 'Aucun rendez-vous',
      'appointments.doctor': 'Médecin',
      'appointments.date': 'Date',
      'appointments.time': 'Heure',
      'appointments.status': 'Statut',
      'appointments.cancel': 'Annuler',
      'appointments.reschedule': 'Reprogrammer',
      'appointments.confirmed': 'Confirmé',
      'appointments.pending': 'En attente',
      'appointments.cancelled': 'Annulé',

      // Messaging Page
      'messaging.title': 'Messages',
      'messaging.conversations': 'Conversations',
      'messaging.noMessages': 'Aucun message',
      'messaging.typeMessage': 'Écrire un message...',
      'messaging.send': 'Envoyer',
      'messaging.backToList': 'Retour aux conversations',

      // Medical Records Page
      'records.title': 'Dossiers Médicaux',
      'records.noRecords': 'Aucun dossier',
      'records.doctor': 'Médecin',
      'records.specialty': 'Spécialité',
      'records.lastVisit': 'Dernière Visite',
      'records.diagnosis': 'Diagnostic',
      'records.prescription': 'Ordonnance',
      'records.download': 'Télécharger',

      // Notifications Page
      'notifications.title': 'Notifications',
      'notifications.noNotifications': 'Aucune notification',
      'notifications.markRead': 'Marquer comme lu',
      'notifications.delete': 'Supprimer',

      // Complaints Page
      'complaints.title': 'Réclamations',
      'complaints.newComplaint': 'Nouvelle Réclamation',
      'complaints.subject': 'Sujet',
      'complaints.description': 'Description',
      'complaints.submit': 'Soumettre',
      'complaints.myComplaints': 'Mes Réclamations',
      'complaints.noComplaints': 'Aucune réclamation',
      'complaints.pending': 'En attente',
      'complaints.resolved': 'Résolue',
      'complaints.response': 'Réponse',

      'common.save': 'Enregistrer',
      'common.cancel': 'Annuler',
      'common.edit': 'Modifier',
      'common.delete': 'Supprimer',

      // Landing Page
      'landing.slogan': 'Rendez-vous dans les hôpitaux publics du Maroc',
      'landing.nav.home': 'Accueil',
      'landing.nav.about': 'À propos',
      'landing.nav.services': 'Services',
      'landing.nav.doctors': 'Médecins',
      'landing.nav.contact': 'Contact',
      'landing.login': 'Se connecter',

      'landing.hero.tag': 'BIENVENUE SUR MAWIIDI 2',
      'landing.hero.title': 'Prenez vos rendez-vous dans les hôpitaux publics, en toute simplicité',
      'landing.hero.subtitle': 'Une plateforme nationale pour faciliter l\'accès aux soins. Patients, médecins, administration : tout est connecté.',
      'landing.hero.book': 'Prendre Rendez-vous',
      'landing.hero.register': 'S\'inscrire',
      'landing.hero.patient': 'Je suis Patient',
      'landing.hero.doctor': 'Je suis Médecin',

      'landing.services.title': 'Nos Services',
      'landing.services.subtitle': 'Découvrez les spécialités disponibles dans les hôpitaux publics',
      'landing.services.cardio': 'Cardiologie',
      'landing.services.cardio.desc': 'Soins complets pour votre cœur.',
      'landing.services.neuro': 'Neurologie',
      'landing.services.neuro.desc': 'Diagnostic et traitement des troubles nerveux.',
      'landing.services.ortho': 'Orthopédie',
      'landing.services.ortho.desc': 'Soins des os et des articulations.',
      'landing.services.pedia': 'Pédiatrie',
      'landing.services.pedia.desc': 'Soins médicaux pour les enfants.',
      'landing.services.all': 'Voir tous les services',

      'landing.departments.title': 'Nos Départements',
      'landing.departments.subtitle': 'Découvrez les spécialités disponibles dans les hôpitaux publics',
      'landing.departments.view_all': 'Voir Tous les Départements',
      'landing.dept.cardiology': 'Cardiologie',
      'landing.dept.cardiology_desc': 'Soins cardiaques complets.',
      'landing.dept.neurology': 'Neurologie',
      'landing.dept.neurology_desc': 'Soins experts du cerveau et du système nerveux.',
      'landing.dept.pediatrics': 'Pédiatrie',
      'landing.dept.pediatrics_desc': 'Soins spécialisés pour les enfants.',
      'landing.dept.dental': 'Soins Dentaires',
      'landing.dept.dental_desc': 'Services complets de santé dentaire.',

      'landing.about.title': 'À Propos de Mawiidi 2',
      'landing.about.desc': 'Mawiidi 2 est une initiative du Ministère de la Santé pour digitaliser et simplifier la prise de rendez-vous dans les hôpitaux publics.',
      'landing.about.f1': 'Prise de rendez-vous 24/7',
      'landing.about.f2': 'Accès à votre dossier médical',
      'landing.about.f3': 'Notifications et rappels SMS',
      'landing.about.f4': 'Gestion simplifiée pour les médecins',
      'landing.about.more': 'En savoir plus',

      'landing.footer.desc': 'Plateforme nationale de rendez-vous.',
      'landing.footer.links': 'Liens Rapides',
      'landing.footer.contact': 'Contact',
      'landing.footer.newsletter': 'Newsletter',
      'landing.footer.subscribe': 'S\'abonner',
      'landing.footer.rights': 'Tous droits réservés.',

      // Portal Selector
      'portal.title': 'Choisissez Votre Espace',
      'portal.subtitle': 'Sélectionnez le portail correspondant à votre rôle',
      'portal.user.title': 'Patient',
      'portal.user.desc': 'Prenez rendez-vous, accédez à vos dossiers médicaux et communiquez avec les médecins.',
      'portal.doctor.title': 'Médecin',
      'portal.doctor.desc': 'Gérez votre planning, les dossiers patients et les consultations.',
      'portal.admin.title': 'Administrateur',
      'portal.admin.desc': 'Gérez les utilisateurs, validez les plannings et supervisez la plateforme.',

      // Doctor Landing Page
      'doctor.slogan': 'Portail Professionnel Médical',
      'doctor.nav.features': 'Fonctionnalités',
      'doctor.nav.benefits': 'Avantages',
      'doctor.hero.tag': 'PORTAIL MÉDECIN',
      'doctor.hero.title': 'Gérez votre pratique en toute simplicité',
      'doctor.hero.subtitle': 'Une plateforme complète pour gérer votre planning, les dossiers patients et les consultations. Tout ce dont vous avez besoin en un seul endroit.',
      'doctor.hero.login': 'Accéder à Mon Espace',
      'doctor.hero.register': 'Nous Rejoindre',
      'doctor.features.title': 'Fonctionnalités Puissantes',
      'doctor.features.subtitle': 'Des outils conçus pour simplifier votre pratique quotidienne',
      'doctor.feature.schedule': 'Gestion du Planning',
      'doctor.feature.schedule_desc': 'Consultez et gérez vos rendez-vous. Définissez vos créneaux disponibles chaque semaine.',
      'doctor.feature.records': 'Dossiers Patients',
      'doctor.feature.records_desc': "Accédez à l'historique complet des patients, allergies, traitements et documents médicaux.",
      'doctor.feature.prescriptions': 'Ordonnances Numériques',
      'doctor.feature.prescriptions_desc': 'Générez des ordonnances PDF signées numériquement et des comptes rendus de consultation.',
      'doctor.feature.messaging': 'Messagerie Sécurisée',
      'doctor.feature.messaging_desc': 'Communiquez de manière sécurisée avec vos patients. Notifications en temps réel.',
      'doctor.benefits.title': 'Pourquoi Rejoindre Mawiidi 2 ?',
      'doctor.benefits.desc': "Rejoignez la révolution numérique de la santé. Simplifiez votre pratique et concentrez-vous sur l'essentiel: vos patients.",
      'doctor.benefit.1': 'Réduisez la charge administrative',
      'doctor.benefit.2': "Accédez aux dossiers de n'importe où",
      'doctor.benefit.3': 'Soumettez vos modifications de planning pour validation',
      'doctor.benefit.4': 'Recevez des notifications pour les rendez-vous et messages',
      'doctor.benefits.cta': "S'inscrire Maintenant",
      'doctor.footer.desc': 'La plateforme professionnelle pour les médecins des hôpitaux publics.',
      'doctor.footer.support': 'Support Technique',
      'doctor.footer.support_desc': 'Équipe de support dédiée disponible 24/7.',

      // Admin Landing Page - French
      'admin.slogan': 'Portail Administration',
      'admin.nav.features': 'Fonctionnalités',
      'admin.nav.modules': 'Modules',
      'admin.hero.tag': 'Portail Admin',
      'admin.hero.title': 'Gestion Complète des Hôpitaux',
      'admin.hero.subtitle': 'Contrôle total sur les structures, rendez-vous, plannings et conformité. Gérez votre réseau de santé efficacement.',
      'admin.hero.login': 'Accéder au Panel Admin',
      'admin.features.title': 'Outils de Gestion Puissants',
      'admin.features.subtitle': 'Tout ce dont vous avez besoin pour gérer hôpitaux, médecins et patients',
      'admin.feature.structures': 'Gestion des Structures',
      'admin.feature.structures_desc': 'Créez et gérez établissements, services et médecins.',
      'admin.feature.appointments': 'Supervision des RDV',
      'admin.feature.appointments_desc': 'Vue globale, taux d\'occupation, statistiques no-show.',
      'admin.feature.planning': 'Validation des Plannings',
      'admin.feature.planning_desc': 'Examinez et approuvez les modifications de planning des médecins.',
      'admin.feature.complaints': 'Gestion des Plaintes',
      'admin.feature.complaints_desc': 'Traitez les plaintes des patients et leurs résolutions.',
      'admin.feature.settings': 'Paramètres Système',
      'admin.feature.settings_desc': 'Configurez durées RDV, rappels et rôles.',
      'admin.feature.security': 'Sécurité & Conformité',
      'admin.feature.security_desc': 'Journaux d\'accès, conformité RGPD, Loi 09-08.',
      'admin.cta.title': 'Prêt à gérer votre réseau hospitalier ?',
      'admin.cta.desc': 'Accédez à tous les outils d\'administration en un seul endroit.',
      'admin.footer.desc': 'La plateforme d\'administration pour les hôpitaux publics.',
      'admin.footer.support': 'Support Technique',
      'admin.footer.support_desc': 'Équipe de support dédiée disponible 24/7.'
    },
    ar: {
      'login.welcome': 'مرحباً بعودتكم',
      'login.subtitle': 'سجل الدخول للوصول إلى مساحتك',
      'login.email': 'البريد الإلكتروني',
      'login.password': 'كلمة المرور',
      'login.signin': 'تسجيل الدخول',
      'login.register': 'سجل هنا',
      'login.no_account': 'ليس لديك حساب؟',

      'register.title': 'إنشاء حساب',
      'register.subtitle': 'انضم إلى موعدي اليوم',
      'register.firstName': 'الاسم الأول',
      'register.lastName': 'اسم العائلة',
      'register.email': 'البريد الإلكتروني',
      'register.password': 'كلمة المرور',
      'register.role': 'أنا...',
      'register.patient': 'مريض',
      'register.doctor': 'طبيب',
      'register.submit': 'إنشاء الحساب',
      'register.loading': 'جاري الإنشاء...',
      'register.hasAccount': 'لديك حساب بالفعل؟',
      'register.signin': 'تسجيل الدخول',

      'common.back': 'رجوع',

      'dashboard.title': 'بوابة المريض',
      'dashboard.welcome': 'مرحباً،',
      'dashboard.book': 'حجز موعد',
      'dashboard.appointments': 'مواعيدي',
      'dashboard.records': 'السجلات الطبية',
      'dashboard.profile': 'الملف الشخصي',
      'dashboard.notifications': 'الإشعارات',
      'dashboard.messages': 'الرسائل',
      'dashboard.complaints': 'الشكاوى',
      'dashboard.logout': 'تسجيل الخروج',
      'dashboard.subtitle': 'نظرة عامة على صحتك',
      'dashboard.upcoming': 'المواعيد القادمة',
      'dashboard.quickActions': 'إجراءات سريعة',
      'dashboard.viewAll': 'عرض الكل',
      'dashboard.bookNow': 'احجز الآن',
      'dashboard.noAppointments': 'لا توجد مواعيد قادمة',
      'dashboard.loading': 'جاري التحميل...',
      'dashboard.details': 'التفاصيل',
      'dashboard.sendMessage': 'إرسال رسالة',
      'dashboard.viewRecords': 'عرض السجلات',
      'dashboard.fileComplaint': 'تقديم شكوى',
      'dashboard.newMessages': 'رسائل جديدة',
      'dashboard.medicalRecords': 'السجلات الطبية',
      'dashboard.upcomingAppointments': 'المواعيد القادمة',

      // Profile Page
      'profile.title': 'ملفي الشخصي',
      'profile.patient': 'مريض',
      'profile.firstName': 'الاسم الأول',
      'profile.lastName': 'الاسم العائلي',
      'profile.email': 'البريد الإلكتروني',
      'profile.phone': 'الهاتف',
      'profile.address': 'العنوان',
      'profile.city': 'المدينة',
      'profile.editProfile': 'تعديل الملف',
      'profile.saveChanges': 'حفظ التغييرات',

      // Booking Page
      'booking.title': 'حجز موعد',
      'booking.searchDoctor': 'البحث عن طبيب',
      'booking.city': 'المدينة',
      'booking.specialty': 'التخصص',
      'booking.allCities': 'جميع المدن',
      'booking.allSpecialties': 'جميع التخصصات',
      'booking.search': 'بحث',
      'booking.availableDoctors': 'الأطباء المتاحون',
      'booking.noDoctors': 'لا يوجد أطباء',
      'booking.selectSlot': 'اختر التاريخ والوقت',
      'booking.selectDate': 'اختر التاريخ',
      'booking.selectTime': 'اختر الوقت',
      'booking.confirm': 'تأكيد الحجز',
      'booking.back': 'رجوع',
      'booking.bookWith': 'احجز مع',

      // Appointments Page
      'appointments.title': 'مواعيدي',
      'appointments.upcoming': 'القادمة',
      'appointments.past': 'السابقة',
      'appointments.noAppointments': 'لا توجد مواعيد',
      'appointments.doctor': 'الطبيب',
      'appointments.date': 'التاريخ',
      'appointments.time': 'الوقت',
      'appointments.status': 'الحالة',
      'appointments.cancel': 'إلغاء',
      'appointments.reschedule': 'إعادة جدولة',
      'appointments.confirmed': 'مؤكد',
      'appointments.pending': 'قيد الانتظار',
      'appointments.cancelled': 'ملغي',

      // Messaging Page
      'messaging.title': 'الرسائل',
      'messaging.conversations': 'المحادثات',
      'messaging.noMessages': 'لا توجد رسائل',
      'messaging.typeMessage': 'اكتب رسالة...',
      'messaging.send': 'إرسال',
      'messaging.backToList': 'العودة للمحادثات',

      // Medical Records Page
      'records.title': 'السجلات الطبية',
      'records.noRecords': 'لا توجد سجلات',
      'records.doctor': 'الطبيب',
      'records.specialty': 'التخصص',
      'records.lastVisit': 'آخر زيارة',
      'records.diagnosis': 'التشخيص',
      'records.prescription': 'الوصفة الطبية',
      'records.download': 'تحميل',

      // Notifications Page
      'notifications.title': 'الإشعارات',
      'notifications.noNotifications': 'لا توجد إشعارات',
      'notifications.markRead': 'تمييز كمقروء',
      'notifications.delete': 'حذف',

      // Complaints Page
      'complaints.title': 'الشكاوى',
      'complaints.newComplaint': 'شكوى جديدة',
      'complaints.subject': 'الموضوع',
      'complaints.description': 'الوصف',
      'complaints.submit': 'إرسال',
      'complaints.myComplaints': 'شكاواي',
      'complaints.noComplaints': 'لا توجد شكاوى',
      'complaints.pending': 'قيد المعالجة',
      'complaints.resolved': 'تم الحل',
      'complaints.response': 'الرد',

      'common.save': 'حفظ التغييرات',
      'common.cancel': 'إلغاء',
      'common.edit': 'تعديل',
      'common.delete': 'حذف',

      // Landing Page
      'landing.slogan': 'مواعيد في المستشفيات العامة بالمغرب',
      'landing.nav.home': 'الرئيسية',
      'landing.nav.about': 'من نحن',
      'landing.nav.services': 'الخدمات',
      'landing.nav.doctors': 'الأطباء',
      'landing.nav.contact': 'اتصل بنا',
      'landing.login': 'تسجيل الدخول',

      'landing.hero.tag': 'مرحباً بكم في موعدي 2',
      'landing.hero.title': 'احجز مواعيدك في المستشفيات العامة بكل سهولة',
      'landing.hero.subtitle': 'منصة وطنية لتسهيل الوصول إلى الرعاية الصحية. المرضى، الأطباء، الإدارة: الكل متصل.',
      'landing.hero.book': 'احجز موعد',
      'landing.hero.register': 'سجل الآن',
      'landing.hero.patient': 'أنا مريض',
      'landing.hero.doctor': 'أنا طبيب',

      'landing.services.title': 'خدماتنا',
      'landing.services.subtitle': 'اكتشف التخصصات المتاحة في المستشفيات العامة',
      'landing.services.cardio': 'طب القلب',
      'landing.services.cardio.desc': 'رعاية شاملة لقلبك.',
      'landing.services.neuro': 'طب الأعصاب',
      'landing.services.neuro.desc': 'تشخيص وعلاج الاضطرابات العصبية.',
      'landing.services.ortho': 'جراحة العظام',
      'landing.services.ortho.desc': 'رعاية العظام والمفاصل.',
      'landing.services.pedia': 'طب الأطفال',
      'landing.services.pedia.desc': 'رعاية طبية للأطفال.',
      'landing.services.all': 'عرض جميع الخدمات',

      'landing.departments.title': 'أقسامنا',
      'landing.departments.subtitle': 'اكتشف التخصصات المتاحة في المستشفيات العامة',
      'landing.departments.view_all': 'عرض جميع الأقسام',
      'landing.dept.cardiology': 'طب القلب',
      'landing.dept.cardiology_desc': 'رعاية شاملة للقلب.',
      'landing.dept.neurology': 'طب الأعصاب',
      'landing.dept.neurology_desc': 'رعاية متخصصة للدماغ والجهاز العصبي.',
      'landing.dept.pediatrics': 'طب الأطفال',
      'landing.dept.pediatrics_desc': 'رعاية متخصصة للأطفال.',
      'landing.dept.dental': 'طب الأسنان',
      'landing.dept.dental_desc': 'خدمات صحة الأسنان الكاملة.',

      'landing.about.title': 'عن موعدي 2',
      'landing.about.desc': 'موعدي 2 هي مبادرة من وزارة الصحة لرقمنة وتبسيط حجز المواعيد في المستشفيات العامة.',
      'landing.about.f1': 'حجز مواعيد 24/7',
      'landing.about.f2': 'الوصول إلى ملفك الطبي',
      'landing.about.f3': 'إشعارات وتذكيرات عبر الرسائل القصيرة',
      'landing.about.f4': 'إدارة مبسطة للأطباء',
      'landing.about.more': 'اقرأ المزيد',

      'landing.footer.desc': 'المنصة الوطنية للمواعيد.',
      'landing.footer.links': 'روابط سريعة',
      'landing.footer.contact': 'اتصل بنا',
      'landing.footer.newsletter': 'النشرة الإخبارية',
      'landing.footer.subscribe': 'اشترك',
      'landing.footer.rights': 'جميع الحقوق محفوظة.',

      // Portal Selector
      'portal.title': 'اختر مساحتك',
      'portal.subtitle': 'حدد البوابة المناسبة لدورك',
      'portal.user.title': 'مريض',
      'portal.user.desc': 'احجز المواعيد، وصل إلى سجلاتك الطبية، وتواصل مع الأطباء.',
      'portal.doctor.title': 'طبيب',
      'portal.doctor.desc': 'أدر جدولك الزمني، سجلات المرضى، والاستشارات.',
      'portal.admin.title': 'مدير',
      'portal.admin.desc': 'أدر المستخدمين، صادق على الجداول، وراقب المنصة.',

      // Doctor Landing Page
      'doctor.slogan': 'بوابة المهنيين الطبيين',
      'doctor.nav.features': 'الميزات',
      'doctor.nav.benefits': 'المزايا',
      'doctor.hero.tag': 'بوابة الطبيب',
      'doctor.hero.title': 'أدر ممارستك بسهولة',
      'doctor.hero.subtitle': 'منصة كاملة لإدارة جدولك الزمني، سجلات المرضى، والاستشارات. كل ما تحتاجه في مكان واحد.',
      'doctor.hero.login': 'الدخول إلى حسابي',
      'doctor.hero.register': 'انضم إلينا',
      'doctor.features.title': 'ميزات قوية',
      'doctor.features.subtitle': 'أدوات مصممة لتبسيط ممارستك اليومية',
      'doctor.feature.schedule': 'إدارة الجدول',
      'doctor.feature.schedule_desc': 'عرض وإدارة مواعيدك. حدد الفترات المتاحة أسبوعيًا.',
      'doctor.feature.records': 'سجلات المرضى',
      'doctor.feature.records_desc': 'الوصول إلى التاريخ الكامل للمرضى، الحساسية، العلاجات والوثائق الطبية.',
      'doctor.feature.prescriptions': 'الوصفات الرقمية',
      'doctor.feature.prescriptions_desc': 'إنشاء وصفات PDF موقعة رقميًا وتقارير الاستشارة.',
      'doctor.feature.messaging': 'رسائل آمنة',
      'doctor.feature.messaging_desc': 'تواصل بشكل آمن مع مرضاك. إشعارات فورية.',
      'doctor.benefits.title': 'لماذا تنضم إلى موعدي 2؟',
      'doctor.benefits.desc': 'انضم إلى الثورة الرقمية في الرعاية الصحية. بسّط ممارستك وركز على الأهم: مرضاك.',
      'doctor.benefit.1': 'تقليل العبء الإداري',
      'doctor.benefit.2': 'الوصول إلى السجلات من أي مكان',
      'doctor.benefit.3': 'تقديم تغييرات الجدول للموافقة',
      'doctor.benefit.4': 'استلام إشعارات للمواعيد والرسائل',
      'doctor.benefits.cta': 'سجل الآن',
      'doctor.footer.desc': 'المنصة المهنية لأطباء المستشفيات العامة.',
      'doctor.footer.support': 'الدعم الفني',
      'doctor.footer.support_desc': 'فريق دعم متوفر على مدار الساعة.',

      // Admin Landing Page - Arabic
      'admin.slogan': 'بوابة الإدارة',
      'admin.nav.features': 'الميزات',
      'admin.nav.modules': 'الوحدات',
      'admin.hero.tag': 'بوابة الإدارة',
      'admin.hero.title': 'إدارة شاملة للمستشفيات',
      'admin.hero.subtitle': 'تحكم كامل في الهياكل والمواعيد والجداول والامتثال. أدر شبكتك الصحية بكفاءة.',
      'admin.hero.login': 'الدخول إلى لوحة الإدارة',
      'admin.features.title': 'أدوات إدارة قوية',
      'admin.features.subtitle': 'كل ما تحتاجه لإدارة المستشفيات والأطباء والمرضى',
      'admin.feature.structures': 'إدارة الهياكل',
      'admin.feature.structures_desc': 'إنشاء وإدارة المؤسسات والخدمات والأطباء.',
      'admin.feature.appointments': 'الإشراف على المواعيد',
      'admin.feature.appointments_desc': 'عرض شامل ومعدلات الإشغال وإحصائيات الغياب.',
      'admin.feature.planning': 'التحقق من الجداول',
      'admin.feature.planning_desc': 'مراجعة والموافقة على تغييرات جداول الأطباء.',
      'admin.feature.complaints': 'إدارة الشكاوى',
      'admin.feature.complaints_desc': 'معالجة شكاوى المرضى وحلولها.',
      'admin.feature.settings': 'إعدادات النظام',
      'admin.feature.settings_desc': 'تكوين مدة المواعيد والتذكيرات والأدوار.',
      'admin.feature.security': 'الأمان والامتثال',
      'admin.feature.security_desc': 'سجلات الوصول، الامتثال للائحة العامة لحماية البيانات، القانون 09-08.',
      'admin.cta.title': 'مستعد لإدارة شبكتك الاستشفائية؟',
      'admin.cta.desc': 'الوصول إلى جميع أدوات الإدارة في مكان واحد.',
      'admin.footer.desc': 'منصة الإدارة للمستشفيات العامة.',
      'admin.footer.support': 'الدعم الفني',
      'admin.footer.support_desc': 'فريق دعم متوفر على مدار الساعة.'
    }
  };

  constructor() {
    // Check local storage for saved language preference
    const savedLang = localStorage.getItem('lang') as Lang;
    if (savedLang && ['en', 'fr', 'ar'].includes(savedLang)) {
      this.setLanguage(savedLang);
    } else {
      // Apply default language settings (for RTL etc.)
      this.setLanguage(this.currentLang());
    }
  }

  setLanguage(lang: Lang) {
    this.currentLang.set(lang);
    localStorage.setItem('lang', lang);

    // Handle RTL for Arabic
    if (lang === 'ar') {
      document.documentElement.setAttribute('dir', 'rtl');
      document.documentElement.setAttribute('lang', 'ar');
    } else {
      document.documentElement.setAttribute('dir', 'ltr');
      document.documentElement.setAttribute('lang', lang);
    }
  }

  getCurrentLang() {
    return this.currentLang();
  }

  // Expose signal for reactive access
  get currentLang$() {
    return this.currentLang;
  }

  translate(key: string): string {
    const lang = this.currentLang();
    return this.translations[lang][key] || key;
  }
}
